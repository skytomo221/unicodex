<% provide :title, "U+#{@unicode_character.hex} – #{ @unicode_character.common_name || 'UNASSIGNED' }" %>

<% format_codepoint = ->(value) { value.present? ? format("U+%04X", value) : "—" } %>

<main class="mx-auto w-full max-w-5xl px-4 sm:px-6 lg:px-8">
  <%= render(Nav::Codepoints.new(unicode_character: @unicode_character)) %>

  <h1 class="text-5xl text-center font-semibold my-5">
    <%= @unicode_character.common_name %>
  </h1>

  <% if @unicode_character.block.present? %>
    <section class="flex flex-col mb-10">
      <h2 class="text-xl text-slate-500 text-center font-semibold my-5">ブロックの位置</h2>
      <div class="flex">
        <div class="grow"></div>
        <%= render(BlockTable.new(block: @unicode_character.block, highlight: @unicode_character.codepoint)) %>
        <div class="grow"></div>
      </div>
    </section>
  <% end %>

  <% if @unicode_character.noncharacter? %>
    非文字です
  <% elsif @unicode_character.unassigned? %>
    未割り当てのコードポイントです
  <% else %>
    <section class="mb-10 grid gap-5 sm:grid-cols-2 xl:grid-cols-3">
      <div class="rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
        <h2 class="mb-3 text-sm font-semibold uppercase tracking-wider text-slate-500">基本情報</h2>
        <dl class="space-y-3">
          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">General Category</dt>
            <dd class="text-lg text-slate-900"><%= @unicode_character.general_category.presence || "—" %></dd>
          </div>

          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Combining Class</dt>
            <dd class="text-lg text-slate-900"><%= @unicode_character.unicode_data_record.canonical_combining_class || "—" %></dd>
          </div>

          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Bidi Class</dt>
            <dd class="text-lg text-slate-900"><%= @unicode_character.unicode_data_record.bidi_class.presence || "—" %></dd>
          </div>

          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">ブロック</dt>
            <dd class="text-lg text-slate-900"><%= @unicode_character.block&.name || "—" %></dd>
          </div>
        </dl>
      </div>

      <div class="rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
        <h2 class="mb-3 text-sm font-semibold uppercase tracking-wider text-slate-500">数値情報</h2>
        <dl class="space-y-3">
          <% numeric_type_label = { 0 => "Decimal", 1 => "Digit", 2 => "Numeric" }[@unicode_character.unicode_data_record.numeric_type] %>
          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Numeric Type</dt>
            <dd class="text-lg text-slate-900"><%= numeric_type_label || "—" %></dd>
          </div>

          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Numeric Value</dt>
            <dd class="text-lg text-slate-900"><%= @unicode_character.unicode_data_record.numeric_value.presence || "—" %></dd>
          </div>
        </dl>
      </div>

      <div class="rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
        <h2 class="mb-3 text-sm font-semibold uppercase tracking-wider text-slate-500">簡易大文字/小文字</h2>
        <dl class="space-y-3">
          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Uppercase</dt>
            <dd class="text-lg text-slate-900"><%= format_codepoint.call(@unicode_character.unicode_data_record.simple_uppercase) %></dd>
          </div>

          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Lowercase</dt>
            <dd class="text-lg text-slate-900"><%= format_codepoint.call(@unicode_character.unicode_data_record.simple_lowercase) %></dd>
          </div>

          <div>
            <dt class="text-xs uppercase tracking-wider text-slate-400">Titlecase</dt>
            <dd class="text-lg text-slate-900"><%= format_codepoint.call(@unicode_character.unicode_data_record.simple_titlecase) %></dd>
          </div>
        </dl>
      </div>
    </section>
    <% if @unicode_character.unicode_data_record.raw_data.present? %>
      <section class="mb-10">
        <h2 class="mb-3 text-lg font-semibold text-slate-800">UCD/UnicodeData.txt スナップショット</h2>
        <pre class="overflow-x-auto rounded-lg bg-slate-900 p-6 text-sm leading-relaxed text-slate-100"><code><%= @unicode_character.unicode_data_record.raw_data %></code></pre>
      </section>
    <% end %>
  <% end %>

  <div class="mb-8 flex flex-wrap gap-4">
    <a class="rounded-full border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-900 shadow-sm transition hover:border-slate-300" href="/">ホームに戻る</a>
    <a class="rounded-full border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-900 shadow-sm transition hover:border-slate-300" href="https://www.unicode.org/charts/" target="_blank" rel="noopener">Unicode Charts</a>
  </div>

</main>
